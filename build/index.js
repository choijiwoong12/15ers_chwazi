const{keys:A}=Object;var _=1000,B=['#b91c1c','#c2410c','#b45309','#a16207','#4d7c0f','#15803d','#047857','#0f766e','#0369a1','#1d4ed8','#7e22ce','#be185d'];class ChwaziCanvas{ticking=!1;touches={};constructor(C){this.canvas=C;this.#setCanvasDimensions();this.#addEventListeners()}start(){if(this.ticking)return;this.ticking=!0;this.completed=!1;this.tickingStartedAt=Date.now();this.tickFn=setInterval(()=>this.tick())}restart(){this.ticking?(this.completed=!1,this.tickingStartedAt=Date.now()):(clearInterval(this.tickFn),this.start())}stop(){if(!this.ticking)return;clearInterval(this.tickFn);this.ticking=!1}complete(){this.completed=!0;this.number=parseInt(num.value);this.selection=selection.value;var _a=A(this.touches);e(_a);if(this.selection=='Fingers')for(const[_A,_B] of _a.entries()){var _b=_A+1;this.touches[_B]={...this.touches[_B],selected:_b<=this.number,position:_b}}else{var _c=[...B];e(_c);for(const[E,aA] of f(_a,this.number).entries()){var D=E+1;for(const aB of aA)this.touches[aB]={...this.touches[aB],group:D,color:_c[E]}}}}tick(){(this.tickingStartedAt+_<Date.now()&&!this.completed)&&this.complete();this.draw()}#onTouchStart(aC){this.completed&&(this.completed=!1,this.touches={});for(const aE of aC.changedTouches){var aD=Object.values(this.touches).map(aF=>aF.color),_C=B.filter(v=>!aD.includes(v)),_d=_C[~~(Math.random()*_C.length)];this.touches[aE.identifier]={clientX:aE.clientX,clientY:aE.clientY,color:_d}}this.ticking?this.restart():this.start()}#onTouchMove(aG){for(const aH of aG.changedTouches)this.touches[aH.identifier]={...this.touches[aH.identifier],clientX:aH.clientX,clientY:aH.clientY}}#onTouchCancel(aI){if(this.completed)return;for(const aJ of aI.changedTouches)delete this.touches[aJ.identifier];A(this.touches).length===0?(this.stop(),this.clean()):(this.restart())}#onTouchEnd(aK){if(this.completed)return;for(const aL of aK.changedTouches)delete this.touches[aL.identifier];A(this.touches).length===0?(this.stop(),this.clean()):(this.restart())}#setCanvasDimensions(){this.canvas.width=window.innerWidth;this.canvas.height=window.innerHeight}#addEventListeners(){this.canvas.addEventListener('touchstart',aM=>this.#onTouchStart(aM));this.canvas.addEventListener('touchmove',aN=>this.#onTouchMove(aN));this.canvas.addEventListener('touchend',aO=>this.#onTouchEnd(aO));this.canvas.addEventListener('touchcancel',aP=>this.#onTouchCancel(aP))}draw(){var aQ=this.canvas.getContext('2d');this.clean();if(this.completed&&this.selection=='Fingers'){if(this.number>1)aQ.fillStyle='black';else{const{color:aR}=Object.values(this.touches).find(aS=>aS.position===1);aQ.fillStyle=aR}aQ.fillRect(0,0,this.canvas.width,this.canvas.height)}for(const aT of Object.values(this.touches))this.#drawTouch(aQ,aT)}#drawTouch(aU,aV){var aW=Date.now()-this.tickingStartedAt;if(this.completed&&this.selection=='Fingers'&&!aV.selected)return;aU.beginPath();aU.fillStyle='white';aU.arc(aV.clientX,aV.clientY,25*window.devicePixelRatio,0,2*Math.PI);aU.fill();aU.beginPath();aU.fillStyle=aV.color;aU.arc(aV.clientX,aV.clientY,15*window.devicePixelRatio||1,0,2*Math.PI);aU.fill();aU.beginPath();aU.lineWidth=2*window.devicePixelRatio;aU.strokeStyle=aV.color;aU.arc(aV.clientX,aV.clientY,18*window.devicePixelRatio,0,((2*Math.PI)/_)*aW);aU.stroke()}clean(){var aX=this.canvas.getContext('2d');aX.clearRect(0,0,this.canvas.width,this.canvas.height)}}function e(a,b,c,d){c=a.length;while (c)b=(Math.random()*c--)|0,d=a[c],a[c]=a[b],a[b]=d}function f(aY,n){let aZ=[];for(let i=n;i>0;i--)aZ.push(aY.splice(0,Math.ceil(aY.length/i)));return aZ}document.addEventListener('DOMContentLoaded',()=>new ChwaziCanvas(document.querySelector('canvas')));
